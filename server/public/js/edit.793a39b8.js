(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["edit"],{"07ac":function(e,t,n){var a=n("23e7"),r=n("6f53").values;a({target:"Object",stat:!0},{values:function(e){return r(e)}})},1071:function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("b0c0");var a=n("7a23"),r={class:"py-2 sticky-top bg-light-variant"},i={class:"flex-shrink-0"},c={class:"mb-3 py-3 container-lg"},s=Object(a["h"])("h2",null,"Edit Advertisement",-1),o=Object(a["h"])("hr",null,null,-1),u=Object(a["h"])("label",{class:"mb-2"},"Images (Max 5 images, 1920x1080 preferred):",-1),l={class:"mb-3 input-group"},d={class:"mb-3 form-check"},f=Object(a["h"])("label",{class:"form-check-label",for:"negotiable"}," Negotiable ",-1),h=Object(a["h"])("label",{class:"mb-2",for:"category"},"Category:",-1),b=Object(a["h"])("option",{value:0}," None ",-1),p=Object(a["h"])("label",{class:"mb-2"},"Location:",-1),m=Object(a["h"])("option",{value:0}," None ",-1),g={class:"mb-3 form-check"},v=Object(a["h"])("label",{class:"form-check-label",for:"overseas"}," International ",-1),O={key:0},j=Object(a["h"])("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),y=Object(a["h"])("span",{class:"visually-hidden"},"Loading...",-1),x={key:1},I={class:"mt-auto"};function k(e,t,n,k,C,w){var A=Object(a["w"])("nav-header"),E=Object(a["w"])("image-input"),N=Object(a["w"])("nav-footer"),S=Object(a["w"])("sidenav");return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["h"])("div",r,[Object(a["h"])(A,{onQueryInput:t[1]||(t[1]=function(t){return e.$router.push("/search?query="+encodeURIComponent(t))}),onMoreClick:t[2]||(t[2]=function(t){return e.$refs.sidenav.showSidenav()})})]),Object(a["h"])("div",i,[Object(a["h"])("div",c,[s,o,Object(a["G"])(Object(a["h"])("input",{class:"mb-3 form-control",type:"text",placeholder:"Title","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.advert.title=t})},null,512),[[a["C"],e.advert.title]]),Object(a["G"])(Object(a["h"])("textarea",{class:"mb-3 form-control",placeholder:"Description",rows:"4","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.advert.description=t})},null,512),[[a["C"],e.advert.description]]),u,Object(a["h"])(E,{class:"mb-3",ref:"imageInput",max:5,input:e.advert.images,onCommit:w.handleSubmit},null,8,["input","onCommit"]),Object(a["h"])("div",l,[Object(a["G"])(Object(a["h"])("select",{class:"form-select flex-grow-0 w-auto","aria-label":"Default select currency","onUpdate:modelValue":t[5]||(t[5]=function(t){return e.advert.currency=t})},[(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(e.currencies,(function(e){return Object(a["q"])(),Object(a["d"])("option",{key:e.id,value:e.id},[Object(a["h"])("span",{textContent:Object(a["y"])(e.name)},null,8,["textContent"])],8,["value"])})),128))],512),[[a["B"],e.advert.currency]]),Object(a["G"])(Object(a["h"])("input",{class:"form-control",type:"text",placeholder:"Price","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.advert.price=t})},null,512),[[a["C"],e.advert.price]])]),Object(a["h"])("div",d,[Object(a["G"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",id:"negotiable","true-value":1,"false-value":0,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.advert.negotiable=t})},null,512),[[a["A"],e.advert.negotiable]]),f]),h,Object(a["G"])(Object(a["h"])("select",{class:"mb-3 form-select","aria-label":"Default select category","onUpdate:modelValue":t[8]||(t[8]=function(t){return e.advert.category=t}),disabled:""},[b,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(e.categories,(function(e){return Object(a["q"])(),Object(a["d"])("option",{key:e.id,value:e.id},[Object(a["h"])("span",{textContent:Object(a["y"])(e.name)},null,8,["textContent"])],8,["value"])})),128))],512),[[a["B"],e.advert.category]]),p,Object(a["G"])(Object(a["h"])("select",{class:"mb-2 form-select","aria-label":"Default select district",disabled:!!e.advert.overseas,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.advert.district=t})},[m,(Object(a["q"])(!0),Object(a["d"])(a["a"],null,Object(a["u"])(e.districts,(function(e){return Object(a["q"])(),Object(a["d"])("option",{key:e.id,value:e.id},[Object(a["h"])("span",{textContent:Object(a["y"])(e.name)},null,8,["textContent"])],8,["value"])})),128))],8,["disabled"]),[[a["B"],e.advert.district]]),Object(a["h"])("div",g,[Object(a["G"])(Object(a["h"])("input",{class:"form-check-input",type:"checkbox",id:"overseas","true-value":1,"false-value":0,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.advert.overseas=t})},null,512),[[a["A"],e.advert.overseas]]),v]),Object(a["h"])("button",{class:"mb-3 btn btn-primary",type:"button",disabled:e.progress,onClick:t[11]||(t[11]=function(){return w.performPreperation&&w.performPreperation.apply(w,arguments)})},[e.progress?(Object(a["q"])(),Object(a["d"])("span",O,[j,y])):(Object(a["q"])(),Object(a["d"])("span",x," Add Item "))],8,["disabled"])])]),Object(a["h"])("div",I,[Object(a["h"])(N)]),Object(a["h"])(S,{ref:"sidenav"},null,512)],64)}var C=n("cce9"),w=n("7aaf"),A=n("f091"),E=n("21e0"),N={name:"Edit",components:{NavHeader:C["a"],ImageInput:w["a"],NavFooter:A["a"],Sidenav:E["a"]},data:function(){return{currencies:null,categories:null,districts:null,advert:{title:"",description:"",images:[],currency:1,price:"",negotiable:0,category:0,district:0,overseas:0},progress:!1}},beforeMount:function(){this.$api.currencyAll().then(function(e){this.currencies=e.data}.bind(this)).catch(function(e){console.error(e),this.currencies=null}.bind(this)),this.$api.categoryAll(!0).then(function(e){this.categories=e.data}.bind(this)).catch(function(e){console.error(e),this.categories=null}.bind(this)),this.$api.districtAll(!0).then(function(e){this.districts=e.data}.bind(this)).catch(function(e){console.error(e),this.districts=null}.bind(this)),this.$api.advertFind(this.$route.query.id,!0).then(function(e){this.advert=e.data}.bind(this)).catch(function(e){console.error(e)}.bind(this))},methods:{performPreperation:function(){this.progress=!0,this.$refs.imageInput.commitChanges()},handleSubmit:function(e){console.log("All images committed.",e);var t=Object.assign({},this.advert,{images:e});this.$api.advertEdit(t).then(function(e){e.data.success&&this.$router.push("/success?code=advert_edit")}.bind(this)).catch(function(e){console.error(e),this.$router.push("/error?code=advert_edit")}.bind(this))}}};N.render=k;t["default"]=N},"466d":function(e,t,n){"use strict";var a=n("d784"),r=n("825a"),i=n("50c4"),c=n("1d80"),s=n("8aa5"),o=n("14c3");a("match",1,(function(e,t,n){return[function(t){var n=c(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,n):new RegExp(t)[e](String(n))},function(e){var a=n(t,e,this);if(a.done)return a.value;var c=r(e),u=String(this);if(!c.global)return o(c,u);var l=c.unicode;c.lastIndex=0;var d,f=[],h=0;while(null!==(d=o(c,u))){var b=String(d[0]);f[h]=b,""===b&&(c.lastIndex=s(u,i(c.lastIndex),l)),h++}return 0===h?null:f}]}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,n){var a=n("1d80"),r=n("5899"),i="["+r+"]",c=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),o=function(e){return function(t){var n=String(a(t));return 1&e&&(n=n.replace(c,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:o(1),end:o(2),trim:o(3)}},"6f53":function(e,t,n){var a=n("83ab"),r=n("df75"),i=n("fc6a"),c=n("d1e7").f,s=function(e){return function(t){var n,s=i(t),o=r(s),u=o.length,l=0,d=[];while(u>l)n=o[l++],a&&!c.call(s,n)||d.push(e?[n,s[n]]:s[n]);return d}};e.exports={entries:s(!0),values:s(!1)}},7156:function(e,t,n){var a=n("861d"),r=n("d2bb");e.exports=function(e,t,n){var i,c;return r&&"function"==typeof(i=t.constructor)&&i!==n&&a(c=i.prototype)&&c!==n.prototype&&r(e,c),e}},"7aaf":function(e,t,n){"use strict";var a=n("7a23"),r={class:"list-group list-group-flush"},i={key:0,class:"list-group-item"},c=Object(a["h"])("span",null," No images selected. Choose images by clicking the button or dragging them into here. ",-1),s={class:"row align-items-center"},o={class:"col-auto"},u={key:0,class:"spinner-border text-primary thumb-size-sm",role:"status"},l=Object(a["h"])("span",{class:"visually-hidden"},"Loading...",-1),d={class:"col text-truncate"},f={class:"col-auto"},h={class:"card-body"},b=Object(a["h"])("span",null,"Choose Images",-1);function p(e,t,n,p,m,g){return Object(a["q"])(),Object(a["d"])("div",{id:"file-list",class:"card",onDragover:t[3]||(t[3]=function(){return g.handleImagesDragOver&&g.handleImagesDragOver.apply(g,arguments)}),onDrop:t[4]||(t[4]=function(){return g.handleImagesDrop&&g.handleImagesDrop.apply(g,arguments)})},[Object(a["h"])("ul",r,[g.imageList.length?(Object(a["q"])(!0),Object(a["d"])(a["a"],{key:1},Object(a["u"])(g.imageList,(function(t){return Object(a["q"])(),Object(a["d"])("li",{class:"list-group-item",key:t.index},[Object(a["h"])("div",s,[Object(a["h"])("div",o,["fetch"==t.status?(Object(a["q"])(),Object(a["d"])("div",u,[l])):Object(a["e"])("",!0),"empty"==t.status?(Object(a["q"])(),Object(a["d"])("div",{key:1,class:"status-icon thumb-size-sm",innerHTML:e.$octicons["image"].toSVG({width:32,height:32,class:"thumb-size"})},null,8,["innerHTML"])):Object(a["e"])("",!0),Object(a["G"])(Object(a["h"])("img",{class:"img-thumbnail object-fit-cover thumb-size-sm",src:t.path,onLoad:function(e){return g.updateStatus(t.index,t.file?"pending":"default")},onError:function(e){return g.updateStatus(t.index,"empty")}},null,40,["src","onLoad","onError"]),[[a["D"],"pending"==t.status||"default"==t.status]])]),Object(a["h"])("div",d,[Object(a["h"])("span",{textContent:Object(a["y"])(g.getImageText(t.index))},null,8,["textContent"])]),Object(a["h"])("div",f,[Object(a["h"])("button",{class:"btn-close",type:"button","aria-label":"Close",onClick:function(e){return g.removeImage(t.index)}},null,8,["onClick"])])])])})),128)):(Object(a["q"])(),Object(a["d"])("li",i,[c]))]),Object(a["h"])("div",h,[Object(a["h"])("button",{class:"btn btn-primary",type:"button",disabled:e.images.length>=n.max,onClick:t[2]||(t[2]=function(){return g.openFileInput&&g.openFileInput.apply(g,arguments)})},[b,Object(a["h"])("input",{class:"d-none",type:"file",multiple:"",id:"file-input",accept:"image/*",onInput:t[1]||(t[1]=function(){return g.handleImagesDialog&&g.handleImagesDialog.apply(g,arguments)})},null,32)],8,["disabled"])])],32)}n("99af"),n("4de4"),n("7db0"),n("4160"),n("a630"),n("d81d"),n("a434"),n("b0c0"),n("a9e3"),n("d3b7"),n("07ac"),n("ac1f"),n("3ca3"),n("466d"),n("159b"),n("ddb0"),n("2b3d"),n("96cf");var m=n("1da1"),g={name:"ImageInput",props:{name:String,max:Number,input:Array},emits:["commit"],data:function(){return{images:[]}},beforeMount:function(){this.$watch("input",function(e){var t=[];e&&e.length&&(t=e.map(function(e,t){var n=this.images.find((function(t){return t&&t.path==e}));return n?Object.assign({},n,{index:t}):{index:t,path:e,file:null,status:"fetch"}}.bind(this)));var n=this.images.filter((function(e){return e.file})).map((function(e,n){return Object.assign({},e,{index:t.length+n})}));this.images=t.concat(n).filter(function(e,t){return t<this.max}.bind(this))}.bind(this),{immediate:!0,deep:!0})},methods:{addImages:function(e){var t=Object.values(e).map(function(e,t){return{index:this.images.length+t,path:URL.createObjectURL(e),file:e,status:"fetch"}}.bind(this));t.forEach(function(e){this.images.length<this.max&&this.images.push(e)}.bind(this))},removeImage:function(e){var t=this.images.find((function(t){return t&&t.index==e}));t.file?(URL.revokeObjectURL(t.path),this.images.splice(e,1),this.images=this.images.map((function(e,t){return Object.assign({},e,{index:t})}))):(t.status="pending",this.images.splice(e,1,t))},updateStatus:function(e,t){var n=this.images.find((function(t){return t&&t.index==e}));n.status=t,this.images.splice(e,1,n)},getImageText:function(e){var t=this.images.find((function(t){return t&&t.index==e}));return"fetch"==t.status?"Loading...":t.file?t.file.name:"empty"==t.status?"Broken Image (Remove is advised)":"Uploaded Image"},openFileInput:function(e){e.currentTarget.querySelector("input").click()},handleImagesDialog:function(e){this.addImages(e.target.files),e.target.value=""},handleImagesDragOver:function(e){e.preventDefault()},handleImagesDrop:function(e){e.preventDefault();var t=/^image\/.*/,n=e.dataTransfer.items?Array.from(e.dataTransfer.items).filter((function(e){return"file"==e.kind&&e.type.match(t)})).map((function(e){return e.getAsFile()})):Array.from(e.dataTransfer.files).filter((function(e){return e.type.match(t)}));this.addImages(n)},commitChanges:function(){var e=this.images.filter((function(e){return!e.file&&"pending"==e.status})),t=this.images.filter((function(e){return e.file&&"pending"==e.status}));e.length||t.length||this.checkCommittable(),e.forEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.imageDelete(t.path);case 3:n=e.sent,n.data.success&&(this.images.splice(t.index,1,null),this.checkCommittable()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}().bind(this)),t.forEach(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$api.imageAdd(t.file);case 3:n=e.sent,n.data.path&&(a=Object.assign({},t,{path:n.data.path,file:null,status:"default"}),this.images.splice(t.index,1,a),this.checkCommittable()),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}().bind(this))},checkCommittable:function(){var e=this.images.filter((function(e){return e&&"pending"==e.status}));if(!e.length){var t=this.images.filter((function(e){return e})).map((function(e){return e.path}));this.$emit("commit",t)}}},computed:{imageList:function(){return this.images.filter((function(e){return e&&(e.file||"pending"!=e.status)}))}}};g.render=p;t["a"]=g},"99af":function(e,t,n){"use strict";var a=n("23e7"),r=n("d039"),i=n("e8b5"),c=n("861d"),s=n("7b0b"),o=n("50c4"),u=n("8418"),l=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),b=f("isConcatSpreadable"),p=9007199254740991,m="Maximum allowed index exceeded",g=h>=51||!r((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),v=d("concat"),O=function(e){if(!c(e))return!1;var t=e[b];return void 0!==t?!!t:i(e)},j=!g||!v;a({target:"Array",proto:!0,forced:j},{concat:function(e){var t,n,a,r,i,c=s(this),d=l(c,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(i=-1===t?c:arguments[t],O(i)){if(r=o(i.length),f+r>p)throw TypeError(m);for(n=0;n<r;n++,f++)n in i&&u(d,f,i[n])}else{if(f>=p)throw TypeError(m);u(d,f++,i)}return d.length=f,d}})},a434:function(e,t,n){"use strict";var a=n("23e7"),r=n("23cb"),i=n("a691"),c=n("50c4"),s=n("7b0b"),o=n("65f0"),u=n("8418"),l=n("1dde"),d=n("ae40"),f=l("splice"),h=d("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,p=Math.min,m=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var n,a,l,d,f,h,v=s(this),O=c(v.length),j=r(e,O),y=arguments.length;if(0===y?n=a=0:1===y?(n=0,a=O-j):(n=y-2,a=p(b(i(t),0),O-j)),O+n-a>m)throw TypeError(g);for(l=o(v,a),d=0;d<a;d++)f=j+d,f in v&&u(l,d,v[f]);if(l.length=a,n<a){for(d=j;d<O-a;d++)f=d+a,h=d+n,f in v?v[h]=v[f]:delete v[h];for(d=O;d>O-a+n;d--)delete v[d-1]}else if(n>a)for(d=O-a;d>j;d--)f=d+a-1,h=d+n-1,f in v?v[h]=v[f]:delete v[h];for(d=0;d<n;d++)v[d+j]=arguments[d+2];return v.length=O-a+n,l}})},a630:function(e,t,n){var a=n("23e7"),r=n("4df4"),i=n("1c7e"),c=!i((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:c},{from:r})},a9e3:function(e,t,n){"use strict";var a=n("83ab"),r=n("da84"),i=n("94ca"),c=n("6eeb"),s=n("5135"),o=n("c6b6"),u=n("7156"),l=n("c04e"),d=n("d039"),f=n("7c73"),h=n("241c").f,b=n("06cf").f,p=n("9bf2").f,m=n("58a8").trim,g="Number",v=r[g],O=v.prototype,j=o(f(O))==g,y=function(e){var t,n,a,r,i,c,s,o,u=l(e,!1);if("string"==typeof u&&u.length>2)if(u=m(u),t=u.charCodeAt(0),43===t||45===t){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+u}for(i=u.slice(2),c=i.length,s=0;s<c;s++)if(o=i.charCodeAt(s),o<48||o>r)return NaN;return parseInt(i,a)}return+u};if(i(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,I=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof I&&(j?d((function(){O.valueOf.call(n)})):o(n)!=g)?u(new v(y(t)),n,I):y(t)},k=a?h(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),C=0;k.length>C;C++)s(v,x=k[C])&&!s(I,x)&&p(I,x,b(v,x));I.prototype=O,O.constructor=I,c(r,g,I)}},d81d:function(e,t,n){"use strict";var a=n("23e7"),r=n("b727").map,i=n("1dde"),c=n("ae40"),s=i("map"),o=c("map");a({target:"Array",proto:!0,forced:!s||!o},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=edit.793a39b8.js.map